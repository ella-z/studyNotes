# åŽŸåž‹
### åŽŸåž‹å¯¹è±¡
- æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŽŸåž‹prototypeå¯¹è±¡ï¼Œé€šè¿‡å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ä¹Ÿæ‹¥æœ‰è¿™ä¸ªåŽŸåž‹å¯¹è±¡ã€‚åŽŸåž‹æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆã€‚
   - æ‰€æœ‰å‡½æ•°çš„åŽŸåž‹é»˜è®¤éƒ½æ˜¯Objectçš„å®žä¾‹ã€‚
   - åŽŸåž‹å¯¹è±¡å°±ç›¸å½“äºŽä¸€ä¸ªå…¬å…±çš„åŒºåŸŸï¼Œæ‰€æœ‰åŒä¸€ä¸ªç±»çš„å®žä¾‹éƒ½å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªåŽŸåž‹å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡ä¸­å…±æœ‰çš„å†…å®¹ï¼Œç»Ÿä¸€è®¾ç½®åˆ°åŽŸåž‹å¯¹è±¡ä¸­
   - å½“æˆ‘ä»¬è®¿é—®å¯¹è±¡çš„ä¸€ä¸ªå±žæ€§æˆ–æ–¹æ³•æ—¶ï¼Œå®ƒå…ˆä¼šåœ¨è‡ªèº«ä¸­å¯»æ‰¾ï¼Œå¦‚æžœæœ‰å°±ç›´æŽ¥æ—¶ä½¿ç”¨ï¼Œå¦‚æžœæ²¡æœ‰å°±ä¼šåŽ»åŽŸåž‹å¯¹è±¡ä¸­å¯»æ‰¾ï¼Œè‹¥åŽŸåž‹å¯¹è±¡ä¸­æ²¡æœ‰ï¼Œå°±åˆ°åŽŸåž‹å¯¹è±¡çš„åŽŸåž‹ä¸­æ‰¾ã€‚
   - åŽŸåž‹åŒ…å«constructorå±žæ€§ï¼ŒæŒ‡å‘æž„é€ å‡½æ•°ã€‚
   - å¯¹è±¡åŒ…å«__proto__æŒ‡å‘å®ƒçš„åŽŸåž‹å¯¹è±¡ã€‚
    
- å½“å‡½æ•°ä»¥æž„é€ å‡½æ•°çš„å½¢å¼è°ƒç”¨æ—¶ï¼Œå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªéšå«çš„å±žæ€§
   - æŒ‡å‘è¯¥æž„é€ å‡½æ•°çš„åŽŸåž‹å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡__proto__æ¥è®¿é—®è¯¥å±žæ€§

- å‡½æ•°å…·æœ‰å¤šä¸ªåŽŸåž‹ï¼Œprototypeç”¨äºŽå®žä¾‹å¯¹è±¡ä½¿ç”¨ï¼Œ__proto__ç”¨äºŽå‡½æ•°å¯¹è±¡ä½¿ç”¨ã€‚

- å®žä¾‹å¯¹è±¡å¯ä»¥ç›´æŽ¥è®¿é—®åŽŸåž‹å¯¹è±¡ä¸­çš„å±žæ€§æˆ–è€…æ–¹æ³•ã€‚

- åŽŸåž‹å¯¹è±¡ä¸­æ–¹æ³•ä¸­çš„thiså°±æ˜¯å®žä¾‹å¯¹è±¡ã€‚

- å®žä¾‹å¯¹è±¡ä¸­çš„_proto_åŽŸåž‹æŒ‡å‘çš„æ˜¯æž„é€ å‡½æ•°ä¸­çš„åŽŸåž‹prototypeã€‚

- å®žä¾‹å¯¹è±¡ä¸­æœ‰__proto__åŽŸåž‹ï¼Œæž„é€ å‡½æ•°ä¸­æœ‰prototypeåŽŸåž‹ï¼Œprototypeæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥prototypeè¿™ä¸ªå¯¹è±¡ä¸­ä¹Ÿæœ‰__proto__æŒ‡å‘çš„åº”è¯¥æ˜¯æŸä¸ªæž„é€ å‡½æ•°çš„åŽŸåž‹prototypeã€‚
    - ä¾‹å­ï¼šå®žä¾‹å¯¹è±¡perçš„__proto__ æŒ‡å‘(ç­‰äºŽ)Person.prototypeï¼ŒPerson.prototypeçš„__proto__æŒ‡å‘(ç­‰äºŽ)Object.prototypeï¼Œè€Œ)Object.prototypeçš„__proto__æ˜¯nullã€‚å­çº§ä¸­prototypeçš„__proto__æŒ‡å‘çš„æ˜¯çˆ¶çº§çš„prototypeã€‚
    
 ```
 ðŸŒ°
 function MyClass(){
   
 }
 //å‘MyClassçš„åŽŸåž‹ä¸­æ·»åŠ å±žæ€§a
 MyClass.prototype.a=123ï¼›//ä½¿ç”¨åŽŸåž‹æ·»åŠ å…±äº«å±žæ€§
 MyClass.prototype.sayHello= function(){ //è¿™æ ·ä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ  //ä½¿ç”¨åŽŸåž‹æ·»åŠ å…±äº«æ–¹æ³•
   console.log("hello");
 }
 var mc = new MyClass();
 var mc2 = new MyClass();
  mc.a=456ï¼›
  console.log(mc.a);//456
  console.log(mc2.a); //123
  
  //ä½¿ç”¨inæ£€æŸ¥å¯¹è±¡ä¸­æ˜¯é¥­å¦å«æœ‰ä¸ªå±žæ€§æ—¶ï¼Œå¦‚æžœå¯¹è±¡ä¸­æ²¡æœ‰ä½†æ˜¯åŽŸåž‹ä¸­æœ‰ï¼Œä¹Ÿä¼šè¿”å›žtrue
  consol.log("name" in mc);
  
  //å¯ä»¥ä½¿ç”¨å¯¹è±¡çš„hasOwnPropertyæ¥æ£€æŸ¥å¯¹è±¡è‡ªèº«ä¸­æ˜¯å¦æœ‰è¯¥å±žæ€§
  console.log(mc.hasOwnProperty("name"));
  
  console.log(mc.__proto__.__proto__);
  
  //åŽŸåž‹æŒ‡å‘çš„æ”¹å˜
  Personçš„æž„é€ å‡½æ•°
  function Person(age){
      this.age = age
  }
  //Personçš„åŽŸåž‹å¯¹è±¡æ–¹æ³•
  Person.prototype.eat = function(){
   console.log("EAT");
  }
  //Studentçš„æž„é€ å‡½æ•°
  function Student(){
  
  }
  //Studentçš„åŽŸåž‹å¯¹è±¡æ–¹æ³•
  Student.prototype.sayHi = function(){
      console.log("hello");
  }
  //Studentçš„åŽŸåž‹æŒ‡å‘äº†ä¸€ä¸ªPersonçš„å®žä¾‹å¯¹è±¡
  Student.prototype = new Person(10);
  Student.prototype.sayHello=function (){
      console.log("Hello");
  }
  var stu = new Student();
  stu.eat();//è¾“å‡ºEAT
  stu.sayHi();//æŠ¥é”™ï¼Œå› ä¸ºStudentçš„åŽŸåž‹å·²ç»è¢«æ”¹å˜äº†ï¼ŒæŒ‡å‘äº†Personçš„åŽŸåž‹
  stu.sayHello();//å¯ä»¥è®¿é—®ï¼Œå› ä¸ºæ˜¯åœ¨åŽŸåž‹æ”¹å˜åŽæ·»åŠ çš„æ–¹æ³•ã€‚
  
  //åŽŸåž‹æŒ‡å‘å¯ä»¥æ”¹å˜
  //å®žä¾‹å¯¹è±¡çš„åŽŸåž‹_proto_æŒ‡å‘çš„æ˜¯è¯¥å¯¹è±¡æ‰€åœ¨çš„æž„é€ å‡½æ•°çš„åŽŸåž‹å¯¹è±¡
  //æž„é€ å‡½æ•°çš„åŽŸåž‹å¯¹è±¡(prototype)æŒ‡å‘å¦‚æžœæ”¹å˜äº†ï¼Œå®žä¾‹å¯¹è±¡çš„åŽŸåž‹(_proto_)æŒ‡å‘ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚
  
  //Personçš„æž„é€ å‡½æ•°
  function Person(age){
      this.age = age
  }
   Person.prototype.eat = function(){
   console.log("EAT");
  }
  Person.prototype={
      constructor:Person,
      sayHi:function(){          //prototypeæŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡
         console.log("hi");
      }
  }
  var per = new Person(10);
  per.sayHi();
 ```
#### å®žä¾‹å¯¹è±¡å’ŒåŽŸåž‹å¯¹è±¡å±žæ€§é‡åé—®é¢˜
```
ðŸŒ°ï¼š
function Person(age,sex){
this.age = age;
this.sex = sex;
}
Person.prototype.sex = "å¥³";
var per = new Person(10,"ç”·");
console.log(per.sex);//è¾“å‡ºæ˜¯ç”·ï¼Œå› ä¸ºå®žä¾‹å¯¹è±¡è®¿é—®å±žæ€§æ—¶ï¼Œä¼šå…ˆä»Žå®žä¾‹å¯¹è±¡ä¸­æ‰¾ï¼Œæ‰¾åˆ°äº†å°±ç›´æŽ¥ç”¨ï¼Œæ‰¾ä¸åˆ°å°±åŽ»æŒ‡å‘çš„åŽŸåž‹å¯¹è±¡ä¸­æ‰¾ï¼Œæ‰¾åˆ°å°±ä½¿ç”¨ï¼Œæ‰¾ä¸åˆ°å°±ä¸ºundefinedï¼Œå› ä¸ºJSæ˜¯ä¸€é—¨åŠ¨æ€ç±»åž‹è¯­è¨€ï¼Œå°±ç®—å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±žæ€§ï¼Œä½†æ˜¯åªè¦å¯¹è±¡.å±žæ€§åå­—ï¼Œå¯¹è±¡å°±æœ‰è¿™ä¸ªå±žæ€§äº†ï¼Œä½†æ˜¯ï¼Œè¯¥å±žæ€§æ²¡æœ‰èµ‹å€¼æ‰€æœ‰ä¸ºundefined
per.sex="äºº";
console.log(Person.prototype.sex)//å› ä¸ºå¹¶ä¸èƒ½é€šè¿‡å®žä¾‹å¯¹è±¡æ”¹å˜åŽŸåž‹å¯¹è±¡ä¸­çš„å±žæ€§å€¼ï¼Œå¯ä»¥é€šè¿‡åŽŸåž‹å¯¹è±¡.prototype=å€¼æ¥è¿›è¡Œæ”¹å˜ã€‚

```

### æŸ¥çœ‹å¯¹è±¡çš„åŽŸåž‹
- getPrototypeOf()ï¼Œè¯¥æ–¹æ³•å¯ä»¥æŸ¥çœ‹å¯¹è±¡çš„åŽŸåž‹ã€‚

### è‡ªå®šä¹‰å¯¹è±¡çš„åŽŸåž‹
- setPrototypeOf(),è¯¥æ–¹æ³•å¯ä»¥è®¾ç½®å¯¹è±¡çš„åŽŸåž‹ã€‚
```
ðŸŒ°ï¼š
let child = {}ï¼›
let parent = {}ï¼›

Object.setPrototypeOf(childï¼Œparent)ï¼›

//è®¾å®šä¹‹åŽï¼Œchild.__proto__æŒ‡å‘çš„æ˜¯parent.prototypeï¼Œè€Œparent.__proto__æŒ‡å‘çš„è¿˜æ˜¯Object.prototype
```

### åŽŸåž‹ä¸­çš„constructor
- prototype.constructoræŒ‡å‘çš„æ˜¯æž„é€ å‡½æ•°æœ¬èº«ã€‚
```
function Person(){}
console.log(Person.prototype.constructor == Person);//true

// è‹¥åœ¨Personçš„åŽŸåž‹ä¸­æ·»åŠ å¤šä¸ªæ–°çš„æ–¹æ³•
Person.prototype ={
   show(){
      console.log("show");
   }
}

let jack = new Person.prototype.constructor(); //æŠ¥é”™ï¼Œå› ä¸ºprototypeæŒ‡å‘çš„å¯¹è±¡å·²ç»è¢«æ”¹å˜ï¼Œæ–°çš„å¯¹è±¡ä¸­åªæœ‰showæ–¹æ³•

ðŸ‘‡ ä¿®æ”¹

Person.prototype ={
   constructor:Person,
   show(){
      console.log("show");
   }
}
let jack = new Person.prototype.constructor(); //æˆåŠŸ
```


## åŽŸåž‹é“¾
- åŽŸåž‹é“¾ï¼šæ˜¯ä¸€ç§å…³ç³»ï¼Œå®žä¾‹å¯¹è±¡å’ŒåŽŸåž‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œå…³ç³»æ˜¯é€šè¿‡åŽŸåž‹(_proto_)è”ç³»çš„ã€‚

### åŽŸåž‹é“¾çš„æ£€æµ‹
- instanceof,åˆ¤æ–­ä¸€ä¸ªæž„é€ å‡½æ•°çš„åŽŸåž‹æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸­çš„åŽŸåž‹é“¾ä¸Šæž„æˆçš„ä¸€éƒ¨åˆ†
```
ðŸŒ°ï¼š
function Person(){}
let jack = new Person();
console.log(jack instanceof Person); //true
console.log(jack instanceof Object); //true

ðŸ‘‡ å¤æ‚åŒ–

function Person(){}
function Student(){}
let student = new Student();
Person.prototype = student; //å°†Personçš„åŽŸåž‹æŒ‡å‘student
let jack = new Person();
console.log(jack instanceof Person); //true
console.log(jack instanceof Object); //true
console.log(student instanceof Person); //false
```

- Object.isPrototypeOf,åˆ¤æ–­æŸä¸€å¯¹è±¡æ˜¯å¦æ˜¯å¦ä¸€å¯¹è±¡åŽŸåž‹é“¾ä¸Šæž„æˆçš„ä¸€éƒ¨åˆ†
```
ðŸŒ°ï¼š
let a = {};
let b = {};
console.log(b.__proto__.isPrototypeOf(a)); //true

ðŸ‘‡ å¤æ‚åŒ–

let a = {};
let b = {};
let c = {};
console.log(b.isPrototypeOf(a));//true
console.log(c.isPrototypeOf(a));//true

```

## å±žæ€§çš„æ£€æŸ¥
- in,æ£€æµ‹æŸä¸€å±žæ€§æ˜¯å¦åœ¨æŸä¸€å¯¹è±¡åŠå…¶å¯¹è±¡åŽŸåž‹é“¾ä¸Šã€‚
```
ðŸŒ°ï¼š
let a ={};
let b = {
   name:"x"
};

console.log("name" in a);//false

Object.setPrototypeOf(a,b);

console.log("name" in a);//true
```

- hasOwnProperty,è¯¥å‡½æ•°åªæ˜¯å•çº¯åœ°æ£€æµ‹å¯¹è±¡ä¸­æ˜¯å¦å«æœ‰æŸä¸ªå±žæ€§ï¼Œä¸ä¼šæ£€æŸ¥å…¶åŽŸåž‹é“¾ã€‚
```
ðŸŒ°ï¼š
let a ={};
let b = {
   name:"x"
};

console.log("name" in a);//false

Object.setPrototypeOf(a,b);

console.log("name" in a);//false
```

## callä¸Žapplyå€Ÿç”¨åŽŸåž‹
```
ðŸŒ°ï¼š
let maxMethod = {
  data: [1, 2, 3, 4, 5]
};
Object.setPrototypeOf(maxMethod, {
  max: function(data) {
    return data.sort((a, b) => b - a)[0];
  }
});
console.log(maxMethod.max(maxMethod.data));

let score = {
  lessons: { js: 100, php: 78, node: 78, linux: 125 }
};
console.log(maxMethod.__proto__.max.call(score, Object.values(score.lessons)));
```







