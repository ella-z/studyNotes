# 断点续传和多线程下载
- 断电续传是被动的分量下载
- 多线程下载是主动的分片下载。
### 如何断电续传和多线程下载
- HTTP是通过在Header里两个参数实现的，客户端发送请求时对应的参数是Range，服务器端响应对应的参数是Content-Range。
- Range
   + 用于请求头中，指定第一个子节的位置和最后一个子节的位置，一般的格式：Range:(unit=first byte pos) - [last byte pos] //左开右闭的区间
   ```
   🌰：
   Range：bytes=0-499 //表示0~499字节范围内
   Range：bytes=500-999 //表示500~999字节范围内
   Range：bytes=-500 //表示最后500子节的内容
   Range：bytes=500- //表示从500子节开始到文件结束部分的内容
   Range：bytes= 500-600,601-999 //同时指定多个范围，分成多块下载，表示500~600字节的内容以及601~999字节的内容
   ```
- Content-Range:
   + 用于响应头中，在发出带Range的请求后，服务器会在Content-Range头部返回当前接收的范围和文件总大小。
   一般格式：bytes (unit first byte pos) - [last byte pos]/[entity legth]
   + 在响应完成后，返回的响应头内容也不同：
      1. HTTP/1.1 200 OK (不使用断点续传方式)
      2. HTTP/1.1 206 Partial Content (使用断电续传方式)
      
### 小栗子
- 断点续传的过程的小栗子
1. 客户端下载一个1024K的文件，已经下载了其中512K.
2. 网络中断，客户端请求续传，因此需要在HTTP头中申明本次需要续传的片段:Range:bytes=512000- ，这个HTTP头通知服务端从文件的512K位置开始传输文件。
3. 服务端收到断点续传请求，从文件的512K位置开始传输，并且在HTTP头中增加：Content-Range:bytes 512000-/1024000 ，并且此时服务端返回的HTTP状态
码应该是206，而不是200。

